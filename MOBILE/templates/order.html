{% comment %} {% comment %} <!DOCTYPE html>
<html>
<head>
  <title>Orders</title>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    
    th {
      background-color: lightgray;
      font-weight: bold;
    }
  </style>
</head>
<body>
  
  {% if orders %}
  <table>
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Order Date</th>
         <th>Price</th>
        <th>Quantity</th> 
        <th>Total Amount</th>
        <th>Status</th>
       
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        
        <td>{{ order.id }}</td>
        <td>{{ order.order_date }}</td>
         <td>$23000</td>
         {% for cart_item in order.cart_items.all %}
        <td>
          {{ cart_item.product_id.name }}
        </td>{% endfor %}
        <td>${{ order.total_amount }}</td>
        <td>{{ order.status }}</td>
        <td>
          {% if not order.is_cancelled %}
          <form method="POST" action="{% url 'cancel_order' %}">
            {% csrf_token %}
            <input type="hidden" name="order_id" value="{{ order.id }}">
            <button type="submit">Cancel Order</button>
          </form>
          {% else %}
          <p>Order has been cancelled.</p>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No orders found.</p>
  {% endif %}
</body>
</html>  





 {% endcomment %}
{% comment %} <!DOCTYPE html>
<html>
<head>
  <title>Cart</title>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    
    th {
      background-color: lightgray;
      font-weight: bold;
    }
    
    .subtotal {
      font-weight: bold;
    }
    
    .error-messages {
      color: red;
      margin-bottom: 10px;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      $('.quantity-input').on('input', function() {
        var quantity = $(this).val();
        var price = parseFloat($(this).closest('tr').find('.price').text().replace('$', ''));
        var subtotal = quantity * price;
        $(this).closest('tr').find('.subtotal').text('$' + subtotal.toFixed(2));
      });
    });
  
    function clearCart() {
      // Get the CSRF token
      var csrfToken = $('input[name="csrfmiddlewaretoken"]').val();
  
      // Send an AJAX request to clear the cart
      $.ajax({
        url: '{% url 'clear_cart' %}',
        type: 'POST',
        data: {},
        headers: {
          'X-CSRFToken': csrfToken
        },
        success: function(response) {
          // Reload the page to update the cart
          location.reload();
        },
        error: function(xhr, status, error) {
          console.error(error);
        }
      });
    }
  </script>
</head>
<body>
  <h1>Your Cart</h1>
  <button onclick="clearCart()">Clear Cart</button>
  
  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Product Id</th>
        <th>Price</th>
        <th>Subtotal</th>
        <th>Quantity</th>
      </tr>
    </thead>
    <tbody>
      {% for cart_item in cart_items %}
      <tr id="{{ cart_item.cart_id }}">
        <td>
          <img src="{{ cart_item.product_id.image1.url }}" alt="{{ cart_item.product_id.name }}" style="width: 50px; height: auto;">
        </td>
        <td>{{ cart_item.product_id.product_id }}</td>
        <td class="price">${{ cart_item.product_id.price }}</td>
        <td class="subtotal">${{ cart_item.sub_total }}</td>
        <td>
          <form action="{% url 'add_to_cart' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="cart_id" value="{{ cart_item.cart_id }}">
            <input type="hidden" name="name" value="{{ cart_item.product_id.name }}">
            <input type="hidden" name="product_id" value="{{ cart_item.product_id.product_id }}">
            <input type="number" class="quantity-input" name="quantity" value="{{ cart_item.quantity }}" min="1">
            {% if error_messages %}
              {% for error_message in error_messages %}
                {% if error_message.product_name == cart_item.product_id.name %}
                  <div class="error-messages">
                    <p>{{ error_message.error_message }}</p>
                  </div>
                {% endif %}
              {% endfor %}
            {% endif %}
            <button onclick="window.location.href='{% url 'checkout' %}'">Proceed to Checkout</button>
           
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if error_messages %}
    <div class="error-messages">
      {% for error_message in error_messages %}
        <p>{{ error_message.product_name }}: {{ error_message.error_message }}</p>
      {% endfor %}
    </div>
  {% endif %}

  {% if not cart_items %}
    <p>Your cart is empty.</p>
  {% endif %}
  
 
</body>
</html>  {% endcomment %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Zay Shop eCommerce HTML CSS Template</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      
     
    <link rel="apple-touch-icon" href="assets/img/apple-icon.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/1659421847.eKart.jpg">

    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/templatemo.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/custom.css' %}">

    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap">
    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.min.css' %}">

    <title>Orders</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f2f2f2;
      }
      
      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        border-radius: 5px;
      }
      
      h1 {
        margin-bottom: 20px;
        color: #333;
        text-align: center;
      }
      
      table {
        width: 100%;
        border-collapse: collapse;
      }
      
      th, td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
      }
      
      th {
        background-color: #f7f7f7;
        color: #333;
        font-weight: bold;
      }
      
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
      
      .no-orders {
        text-align: center;
        font-size: 18px;
        color: #777;
        margin-top: 30px;
      }
      
      .product-image {
        width: 50px;
        height: auto;
      }
    </style>
    

</head>

<body>
    <!-- Start Top Nav -->
    <nav class="navbar navbar-expand-lg bg-dark navbar-light d-none d-lg-block" id="templatemo_nav_top">
        <div class="container text-light">
            <div class="w-100 d-flex justify-content-between">
                <div>
                    <i class="fa fa-envelope mx-2"></i>
                    <a class="navbar-sm-brand text-light text-decoration-none" href="mailto:info@company.com">info@company.com</a>
                    <i class="fa fa-phone mx-2"></i>
                    <a class="navbar-sm-brand text-light text-decoration-none" href="tel:010-020-0340">010-020-0340</a>
                </div>
                <div>
                    <a class="text-light" href="https://fb.com/templatemo" target="_blank" rel="sponsored"><i class="fab fa-facebook-f fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://twitter.com/" target="_blank"><i class="fab fa-twitter fa-sm fa-fw me-2"></i></a>
                    <a class="text-light" href="https://www.linkedin.com/" target="_blank"><i class="fab fa-linkedin fa-sm fa-fw"></i></a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Close Top Nav -->


    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light shadow">
        <div class="container d-flex justify-content-between align-items-center">

            <a class="navbar-brand text-success logo h1 align-self-center" href="index.html">
               Ecart
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#templatemo_main_nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between" id="templatemo_main_nav">
                <div class="flex-fill">
                    <ul class="nav navbar-nav d-flex justify-content-between mx-lg-auto">
                       
                        <li class="nav-item">
                          <a class="btn btn-outline-success" href="/user_logout" style="margin-left: 80px; font-weight: bold; font-size: 20px;" >Logout</a>
                      </li>
                    </ul>
                </div>
                <div class="navbar align-self-center d-flex">
                    <div class="d-lg-none flex-sm-fill mt-3 mb-4 col-7 col-sm-auto pr-3">
                        <div class="input-group">
                            <input type="text" class="form-control" id="inputMobileSearch" placeholder="Search ...">
                            <div class="input-group-text">
                                <i class="fa fa-fw fa-search"></i>
                            </div>
                        </div>
                    </div>
                    <a class="nav-icon d-none d-lg-inline" href="#" data-bs-toggle="modal" data-bs-target="#templatemo_search">
                        <i class="fa fa-fw fa-search text-dark mr-2"></i>
                    </a>
                    <a class="nav-icon position-relative text-decoration-none" href="">
                        <i class="fa fa-fw fa-cart-arrow-down text-dark mr-1"></i>
                        <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">7</span>
                    </a>
                    <a class="nav-icon position-relative text-decoration-none" href="#">
                        <i class="fa fa-fw fa-user text-dark mr-3"></i>
                        <span class="position-absolute top-0 left-100 translate-middle badge rounded-pill bg-light text-dark">+99</span>
                    </a>
                </div>
            </div>

        </div>
    </nav>
    <!-- Close Header -->

    <!-- Modal -->
    


    <!-- Start Banner Hero -->
    
    <div class="container">
      <h1>Orders</h1>

    {% if orders %}
    <table>
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Order Date</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Total Amount</th>
          <th>Status</th>
          <th>cancel order</th>
          <th>return</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.order_date }}</td>
          <td>
            <img class="product-image" src="{{ order.product.image1.url }}" alt="{{ order.product.name }}">
          </td>
          
          
         
          <td>{{ order.status }}</td>
          <td>{{ order.total_amount }}</td>
          <td>{{ order.total_quantity }}</td>
          <td>{{ order.user_id.name}}</td>
          <td>{{ order.status}}</td>

           <td>
            {% if order.status != 'Delivered' %}
            <form method="POST" action="{% url 'cancel_order' %}">
              {% csrf_token %}
              <input type="hidden" name="order_id" value="{{ order.id }}">
              <button type="submit">Cancel Order</button>
            </form>
            {% else %}
            <p>Order cannot be cancelled.</p>
            {% endif %}
          </td> 
         
          
          <td>{{ order.address.address_line}}</td>


          

          {% comment %} <td>
            {% if order.status == 'Delivered' and not order.is_returned %}
            <form method="POST" action="{% url 'return_order' %}">
              {% csrf_token %}
              <input type="hidden" name="order_id" value="{{ order.id }}">
              <button type="submit">Return Order</button>
            </form>
            {% else %}
            <p>Order cannot be returned.</p>
            {% endif %}
          </td> {% endcomment %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No orders found.</p>
    {% endif %}
  </div>
      
    
     
      
     
   
        
    <!-- End Banner Hero -->

   
    <!-- Start Categories of The Month -->
    
    
    <!-- End Categories of The Month -->


    <!-- Start Featured Product -->
   
    <!-- End Featured Product -->


    <!-- Start Footer -->
    <footer class="bg-dark" id="tempaltemo_footer">
        <div class="container">
            <div class="row">

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-success border-bottom pb-3 border-light logo">Zay Shop</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li>
                            <i class="fas fa-map-marker-alt fa-fw"></i>
                            123 Consectetur at ligula 10660
                        </li>
                        <li>
                            <i class="fa fa-phone fa-fw"></i>
                            <a class="text-decoration-none" href="tel:010-020-0340">010-020-0340</a>
                        </li>
                        <li>
                            <i class="fa fa-envelope fa-fw"></i>
                            <a class="text-decoration-none" href="mailto:info@company.com">info@company.com</a>
                        </li>
                    </ul>
                </div>

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-light border-bottom pb-3 border-light">Products</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li><a class="text-decoration-none" href="#">Luxury</a></li>
                        <li><a class="text-decoration-none" href="#">Sport Wear</a></li>
                        <li><a class="text-decoration-none" href="#">Men's Shoes</a></li>
                        <li><a class="text-decoration-none" href="#">Women's Shoes</a></li>
                        <li><a class="text-decoration-none" href="#">Popular Dress</a></li>
                        <li><a class="text-decoration-none" href="#">Gym Accessories</a></li>
                        <li><a class="text-decoration-none" href="#">Sport Shoes</a></li>
                    </ul>
                </div>

                <div class="col-md-4 pt-5">
                    <h2 class="h2 text-light border-bottom pb-3 border-light">Further Info</h2>
                    <ul class="list-unstyled text-light footer-link-list">
                        <li><a class="text-decoration-none" href="#">Home</a></li>
                        <li><a class="text-decoration-none" href="#">About Us</a></li>
                        <li><a class="text-decoration-none" href="#">Shop Locations</a></li>
                        <li><a class="text-decoration-none" href="#">FAQs</a></li>
                        <li><a class="text-decoration-none" href="#">Contact</a></li>
                    </ul>
                </div>

            </div>

            <div class="row text-light mb-4">
                <div class="col-12 mb-3">
                    <div class="w-100 my-3 border-top border-light"></div>
                </div>
                <div class="col-auto me-auto">
                    <ul class="list-inline text-left footer-icons">
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="http://facebook.com/"><i class="fab fa-facebook-f fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://www.instagram.com/"><i class="fab fa-instagram fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://twitter.com/"><i class="fab fa-twitter fa-lg fa-fw"></i></a>
                        </li>
                        <li class="list-inline-item border border-light rounded-circle text-center">
                            <a class="text-light text-decoration-none" target="_blank" href="https://www.linkedin.com/"><i class="fab fa-linkedin fa-lg fa-fw"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="col-auto">
                    <label class="sr-only" for="subscribeEmail">Email address</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control bg-dark border-light" id="subscribeEmail" placeholder="Email address">
                        <div class="input-group-text btn-success text-light">Subscribe</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-100 bg-black py-3">
            <div class="container">
                <div class="row pt-2">
                    <div class="col-12">
                        <p class="text-left text-light">
                            Copyright &copy; 2021 Company Name 
                            | Designed by <a rel="sponsored" href="https://templatemo.com" target="_blank">TemplateMo</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </footer>
    <!-- End Footer -->

    <!-- Start Script -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery-1.11.0.min.js"></script>
    <script src="assets/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/templatemo.js"></script>
    <script src="assets/js/custom.js"></script>
    <!-- End Script -->
</body>

</html>







{% comment %} 
 <!DOCTYPE html>
 <html>
 <head>
   <title>Orders</title>
   <style>
     body {
       font-family: Arial, sans-serif;
       margin: 0;
       padding: 20px;
       background-color: #f2f2f2;
     }
     
     .container {
       max-width: 800px;
       margin: 0 auto;
       background-color: white;
       box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
       padding: 20px;
       border-radius: 5px;
     }
     
     h1 {
       margin-bottom: 20px;
       color: #333;
       text-align: center;
     }
     
     table {
       width: 100%;
       border-collapse: collapse;
     }
     
     th, td {
       border: 1px solid #ccc;
       padding: 10px;
       text-align: center;
     }
     
     th {
       background-color: #f7f7f7;
       color: #333;
       font-weight: bold;
     }
     
     tr:nth-child(even) {
       background-color: #f2f2f2;
     }
     
     .no-orders {
       text-align: center;
       font-size: 18px;
       color: #777;
       margin-top: 30px;
     }
     
     .product-image {
       width: 50px;
       height: auto;
     }
   </style>
 </head>
 <body>
    <div class="container">
      <h1>Orders</h1>

    {% if orders %}
    <table>
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Order Date</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Total Amount</th>
          <th>Status</th>
          <th>cancel order</th>
          <th>return</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.order_date }}</td>
          <td>
            <img class="product-image" src="{{ order.product.image2.url }}" alt="{{ order.product.name }}">
          </td>
          <td>
            {% for item in cart_items %}
              {{ item.quantity }}
            {% endfor %}
          </td>
          
          <td>${{ order.total_amount }}</td>
          <td>{{ order.status }}</td>

          <td>
            {% if order.status != 'Delivered' %}
            <form method="POST" action="{% url 'cancel_order' %}">
              {% csrf_token %}
              <input type="hidden" name="order_id" value="{{ order.id }}">
              <button type="submit">Cancel Order</button>
            </form>
            {% else %}
            <p>Order cannot be cancelled.</p>
            {% endif %}
          </td>

          <td>
            {% if order.status == 'Delivered' and not order.is_returned %}
            <form method="POST" action="{% url 'return_order' %}">
              {% csrf_token %}
              <input type="hidden" name="order_id" value="{{ order.id }}">
              <button type="submit">Return Order</button>
            </form>
            {% else %}
            <p>Order cannot be returned.</p>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No orders found.</p>
    {% endif %}
  </div>
</body> {% endcomment %}